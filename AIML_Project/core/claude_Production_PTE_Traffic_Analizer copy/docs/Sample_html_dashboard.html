<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Production vs PTE Traffic Analysis Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }

        .header h1 {
            color: #2d3748;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header .subtitle {
            color: #718096;
            font-size: 1.1em;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .metric-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }

        .metric-card .label {
            color: #718096;
            font-size: 0.9em;
            margin-bottom: 10px;
            text-transform: uppercase;
            font-weight: 600;
        }

        .metric-card .value {
            color: #2d3748;
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .metric-card .comparison {
            font-size: 0.9em;
            margin-top: 10px;
            padding: 8px;
            border-radius: 5px;
        }

        .comparison.good {
            background: #d4edda;
            color: #155724;
        }

        .comparison.warning {
            background: #fff3cd;
            color: #856404;
        }

        .comparison.critical {
            background: #f8d7da;
            color: #721c24;
        }

        .chart-container {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .chart-container h2 {
            color: #2d3748;
            margin-bottom: 20px;
            font-size: 1.5em;
        }

        .chart-wrapper {
            position: relative;
            height: 400px;
        }

        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .discrepancies-table {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .discrepancies-table h2 {
            color: #2d3748;
            margin-bottom: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th {
            background: #f7fafc;
            color: #2d3748;
            padding: 15px;
            text-align: left;
            font-weight: 600;
            border-bottom: 2px solid #e2e8f0;
        }

        td {
            padding: 15px;
            border-bottom: 1px solid #e2e8f0;
        }

        .severity-badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
            text-transform: uppercase;
        }

        .severity-critical {
            background: #feb2b2;
            color: #742a2a;
        }

        .severity-high {
            background: #fbd38d;
            color: #7c2d12;
        }

        .severity-medium {
            background: #faf089;
            color: #744210;
        }

        .severity-low {
            background: #c6f6d5;
            color: #22543d;
        }

        .score-card {
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
        }

        .score-value {
            font-size: 5em;
            font-weight: bold;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 20px 0;
        }

        .score-rating {
            font-size: 1.5em;
            color: #4a5568;
            margin-bottom: 20px;
        }

        .progress-bar {
            width: 100%;
            height: 30px;
            background: #e2e8f0;
            border-radius: 15px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 1s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        .recommendations {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .recommendation-item {
            padding: 20px;
            margin-bottom: 15px;
            border-left: 4px solid #667eea;
            background: #f7fafc;
            border-radius: 5px;
        }

        .recommendation-item h3 {
            color: #2d3748;
            margin-bottom: 10px;
        }

        .recommendation-item p {
            color: #4a5568;
            line-height: 1.6;
        }

        @media (max-width: 768px) {
            .two-column {
                grid-template-columns: 1fr;
            }
            
            .metrics-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üöÄ Production vs PTE Traffic Analysis</h1>
            <p class="subtitle">Analysis ID: ANALYSIS_20231213_143022 | Generated: 2023-12-13 14:30:22</p>
        </div>

        <!-- Key Metrics Grid -->
        <div class="metrics-grid">
            <div class="metric-card">
                <div class="label">Test Efficacy Score</div>
                <div class="value">68.5%</div>
                <div class="comparison warning">‚ö†Ô∏è Fair - Needs Improvement</div>
            </div>
            <div class="metric-card">
                <div class="label">Endpoint Coverage</div>
                <div class="value">73.3%</div>
                <div class="comparison warning">‚ö†Ô∏è 12 endpoints untested</div>
            </div>
            <div class="metric-card">
                <div class="label">Critical Issues</div>
                <div class="value">2</div>
                <div class="comparison critical">üî¥ Requires immediate attention</div>
            </div>
            <div class="metric-card">
                <div class="label">High Priority Issues</div>
                <div class="value">3</div>
                <div class="comparison warning">‚ö†Ô∏è Address before next release</div>
            </div>
        </div>

        <!-- Two Column Layout -->
        <div class="two-column">
            <!-- Efficacy Score Breakdown -->
            <div class="score-card">
                <h2>Overall Test Efficacy</h2>
                <div class="score-value">68.5</div>
                <div class="score-rating">Fair Rating</div>
                
                <div style="text-align: left; margin-top: 20px;">
                    <p style="margin-bottom: 10px; color: #4a5568;"><strong>Coverage Score:</strong></p>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 73.3%">73.3%</div>
                    </div>
                    
                    <p style="margin: 15px 0 10px; color: #4a5568;"><strong>Load Coverage:</strong></p>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 73%">73.0%</div>
                    </div>
                    
                    <p style="margin: 15px 0 10px; color: #4a5568;"><strong>Performance Score:</strong></p>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 50%; background: #f59e0b;">50.0%</div>
                    </div>
                    
                    <p style="margin: 15px 0 10px; color: #4a5568;"><strong>Error Validation:</strong></p>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 20%; background: #ef4444;">20.0%</div>
                    </div>
                </div>
            </div>

            <!-- Request Rate Comparison Chart -->
            <div class="chart-container">
                <h2>Production vs PTE: Request Rate</h2>
                <div class="chart-wrapper">
                    <canvas id="requestRateChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Response Time Comparison -->
        <div class="chart-container">
            <h2>Response Time Percentiles Comparison</h2>
            <div class="chart-wrapper">
                <canvas id="responseTimeChart"></canvas>
            </div>
        </div>

        <!-- Two Column Charts -->
        <div class="two-column">
            <!-- Resource Utilization -->
            <div class="chart-container">
                <h2>Resource Utilization</h2>
                <div class="chart-wrapper">
                    <canvas id="resourceChart"></canvas>
                </div>
            </div>

            <!-- Hourly Traffic Pattern -->
            <div class="chart-container">
                <h2>Production Traffic Pattern (24h)</h2>
                <div class="chart-wrapper">
                    <canvas id="trafficPatternChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Discrepancies Table -->
        <div class="discrepancies-table">
            <h2>üîç Critical Discrepancies</h2>
            <table>
                <thead>
                    <tr>
                        <th>Metric</th>
                        <th>Production</th>
                        <th>PTE</th>
                        <th>Discrepancy</th>
                        <th>Severity</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Request Rate</strong></td>
                        <td>8,543.21 req/s</td>
                        <td>6,234.45 req/s</td>
                        <td>-27.0%</td>
                        <td><span class="severity-badge severity-critical">Critical</span></td>
                    </tr>
                    <tr>
                        <td><strong>Error Rate</strong></td>
                        <td>0.342%</td>
                        <td>0.523%</td>
                        <td>+52.9%</td>
                        <td><span class="severity-badge severity-critical">Critical</span></td>
                    </tr>
                    <tr>
                        <td><strong>P95 Response Time</strong></td>
                        <td>245.83 ms</td>
                        <td>312.45 ms</td>
                        <td>+27.1%</td>
                        <td><span class="severity-badge severity-high">High</span></td>
                    </tr>
                    <tr>
                        <td><strong>Throughput</strong></td>
                        <td>1,234.56 MB/s</td>
                        <td>892.34 MB/s</td>
                        <td>-27.7%</td>
                        <td><span class="severity-badge severity-high">High</span></td>
                    </tr>
                    <tr>
                        <td><strong>CPU Utilization</strong></td>
                        <td>76.4%</td>
                        <td>82.1%</td>
                        <td>+7.5%</td>
                        <td><span class="severity-badge severity-high">High</span></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Recommendations -->
        <div class="recommendations">
            <h2>üìã Key Recommendations</h2>
            
            <div class="recommendation-item">
                <h3>1. Increase Load Testing Capacity</h3>
                <p>PTE testing only reached 73% of production peak load. Increase test load from 6,234 req/s to minimum 12,815 req/s (150% of production peak) to ensure adequate headroom for traffic spikes.</p>
            </div>
            
            <div class="recommendation-item">
                <h3>2. Investigate Error Rate Discrepancy</h3>
                <p>Production error rate (0.52%) significantly exceeds PTE predictions (0.34%). This suggests either production environment issues or inadequate error scenario coverage in PTE. Conduct immediate investigation.</p>
            </div>
            
            <div class="recommendation-item">
                <h3>3. Test Missing Endpoints</h3>
                <p>12 production endpoints remain untested, including critical analytics and bulk operation APIs. Add these to the next PTE certification cycle to achieve >90% coverage.</p>
            </div>
            
            <div class="recommendation-item">
                <h3>4. Extend Test Duration</h3>
                <p>Run sustained load tests for minimum 60 minutes to identify memory leaks, connection pool exhaustion, and other time-dependent issues not visible in shorter tests.</p>
            </div>
            
            <div class="recommendation-item">
                <h3>5. Implement Spike Testing</h3>
                <p>Add spike test scenarios at 2x production peak (17,086 req/s) to validate system resilience under extreme load conditions and verify graceful degradation.</p>
            </div>
        </div>

        <!-- Endpoint Coverage -->
        <div class="chart-container">
            <h2>Endpoint Test Coverage</h2>
            <div class="chart-wrapper" style="height: 300px;">
                <canvas id="coverageChart"></canvas>
            </div>
        </div>
    </div>

    <script>
        // Chart.js default configuration
        Chart.defaults.font.family = "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif";
        Chart.defaults.color = '#4a5568';

        // Request Rate Comparison
        const requestRateCtx = document.getElementById('requestRateChart').getContext('2d');
        new Chart(requestRateCtx, {
            type: 'bar',
            data: {
                labels: ['Average', 'Peak'],
                datasets: [{
                    label: 'Production',
                    data: [4521.67, 8543.21],
                    backgroundColor: 'rgba(102, 126, 234, 0.8)',
                    borderColor: 'rgba(102, 126, 234, 1)',
                    borderWidth: 2
                }, {
                    label: 'PTE',
                    data: [3890.12, 6234.45],
                    backgroundColor: 'rgba(239, 68, 68, 0.8)',
                    borderColor: 'rgba(239, 68, 68, 1)',
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: true,
                        position: 'top'
                    },
                    title: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Requests per Second'
                        }
                    }
                }
            }
        });

        // Response Time Comparison
        const responseTimeCtx = document.getElementById('responseTimeChart').getContext('2d');
        new Chart(responseTimeCtx, {
            type: 'line',
            data: {
                labels: ['P50', 'P95', 'P99'],
                datasets: [{
                    label: 'Production',
                    data: [122.1, 245.83, 487.92],
                    borderColor: 'rgba(102, 126, 234, 1)',
                    backgroundColor: 'rgba(102, 126, 234, 0.1)',
                    borderWidth: 3,
                    tension: 0.4,
                    fill: true
                }, {
                    label: 'PTE',
                    data: [156.32, 312.45, 612.33],
                    borderColor: 'rgba(239, 68, 68, 1)',
                    backgroundColor: 'rgba(239, 68, 68, 0.1)',
                    borderWidth: 3,
                    tension: 0.4,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: true,
                        position: 'top'
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Response Time (ms)'
                        }
                    }
                }
            }
        });

        // Resource Utilization
        const resourceCtx = document.getElementById('resourceChart').getContext('2d');
        new Chart(resourceCtx, {
            type: 'radar',
            data: {
                labels: ['CPU', 'Memory', 'DB Connections', 'Cache Hit Rate'],
                datasets: [{
                    label: 'Production',
                    data: [76.4, 68.2, 65, 92],
                    borderColor: 'rgba(102, 126, 234, 1)',
                    backgroundColor: 'rgba(102, 126, 234, 0.2)',
                    borderWidth: 2
                }, {
                    label: 'PTE',
                    data: [82.1, 71.8, 70, 88],
                    borderColor: 'rgba(239, 68, 68, 1)',
                    backgroundColor: 'rgba(239, 68, 68, 0.2)',
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    r: {
                        beginAtZero: true,
                        max: 100
                    }
                }
            }
        });

        // Traffic Pattern
        const trafficPatternCtx = document.getElementById('trafficPatternChart').getContext('2d');
        new Chart(trafficPatternCtx, {
            type: 'line',
            data: {
                labels: ['0h', '2h', '4h', '6h', '8h', '10h', '12h', '14h', '16h', '18h', '20h', '22h'],
                datasets: [{
                    label: 'Request Rate',
                    data: [2134, 1654, 1678, 2876, 4876, 6234, 6543, 5876, 5123, 4234, 3456, 2876],
                    borderColor: 'rgba(102, 126, 234, 1)',
                    backgroundColor: 'rgba(102, 126, 234, 0.1)',
                    borderWidth: 3,
                    tension: 0.4,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Requests per Second'
                        }
                    }
                }
            }
        });

        // Coverage Chart
        const coverageCtx = document.getElementById('coverageChart').getContext('2d');
        new Chart(coverageCtx, {
            type: 'doughnut',
            data: {
                labels: ['Tested Endpoints', 'Untested Endpoints'],
                datasets: [{
                    data: [33, 12],
                    backgroundColor: [
                        'rgba(102, 126, 234, 0.8)',
                        'rgba(239, 68, 68, 0.8)'
                    ],
                    borderWidth: 2,
                    borderColor: '#fff'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                }
            }
        });
    </script>
</body>
</html>